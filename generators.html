<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Probe Generators &mdash; diamond-miner 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MDA" href="rounds.html" />
    <link rel="prev" title="Flow Mappers" href="mappers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> diamond-miner
          </a>
              <div class="version">
                1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="defaults.html">Default Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="queries.html">Database Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="mappers.html">Flow Mappers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Probe Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="rounds.html">MDA</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">diamond-miner</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Probe Generators</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/dioptra-io/diamond-miner/blob/main/docs/generators.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-diamond_miner.generators">
<span id="probe-generators"></span><h1>Probe Generators<a class="headerlink" href="#module-diamond_miner.generators" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="diamond_miner.generators.probe_generator">
<span class="sig-prename descclassname"><span class="pre">diamond_miner.generators.</span></span><span class="sig-name descname"><span class="pre">probe_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">prefixes:</span> <span class="pre">~collections.abc.Sequence[tuple[str,</span> <span class="pre">str]],</span> <span class="pre">flow_ids:</span> <span class="pre">~collections.abc.Sequence[int],</span> <span class="pre">ttls:</span> <span class="pre">~collections.abc.Sequence[int],</span> <span class="pre">*,</span> <span class="pre">prefix_len_v4:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">24,</span> <span class="pre">prefix_len_v6:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">64,</span> <span class="pre">probe_src_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">24000,</span> <span class="pre">probe_dst_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">33434,</span> <span class="pre">mapper_v4:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;,</span> <span class="pre">mapper_v6:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;,</span> <span class="pre">seed:</span> <span class="pre">~typing.Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/diamond_miner/generators/standalone.html#probe_generator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diamond_miner.generators.probe_generator" title="Permalink to this definition"></a></dt>
<dd><p>Generate a probe for each prefix, flow ID and TTL, in a random order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefixes</strong> – A list of (prefix, protocol) tuples. The protocol can be <code class="docutils literal notranslate"><span class="pre">icmp</span></code>, <code class="docutils literal notranslate"><span class="pre">icmp6</span></code> or <code class="docutils literal notranslate"><span class="pre">udp</span></code>.</p></li>
<li><p><strong>flow_ids</strong> – The flow IDs to probe.</p></li>
<li><p><strong>ttls</strong> – The TTLs to probe.</p></li>
<li><p><strong>prefix_len_v4</strong> – The prefix length to which the IPv4 prefixes will be split to.</p></li>
<li><p><strong>prefix_len_v6</strong> – The prefix length to which the IPv6 prefixes will be split to.</p></li>
<li><p><strong>probe_src_port</strong> – The minimum source port of the probes (can be incremented by the flow mapper).</p></li>
<li><p><strong>probe_dst_port</strong> – The destination port of the probes (constant).</p></li>
<li><p><strong>mapper_v4</strong> – The flow mapper for IPv4 probes.</p></li>
<li><p><strong>mapper_v6</strong> – The flow mapper for IPv6 probes.</p></li>
<li><p><strong>seed</strong> – The seed of the random permutation (two calls with the same seed will yield the probes in the same order).</p></li>
</ul>
</dd>
</dl>
<p>This function is very versatile, it can generate Tokyo-Ping <span id="id1">[<a class="reference internal" href="bibliography.html#id4" title="Cristel Pelsser, Luca Cittadini, Stefano Vissicchio, and Randy Bush. From Paris to Tokyo: on the suitability of ping to measure latency. In Proceedings of the 2013 conference on Internet measurement conference, 427–432. 2013.">PCVB13</a>]</span>,
Paris-Traceroute <span id="id2">[<a class="reference internal" href="bibliography.html#id2" title="Brice Augustin, Xavier Cuvellier, Benjamin Orgogozo, Fabien Viger, Timur Friedman, Matthieu Latapy, Clémence Magnien, and Renata Teixeira. Avoiding traceroute anomalies with paris traceroute. In Proceedings of the 6th ACM SIGCOMM conference on Internet measurement, 153–158. 2006.">ACO+06</a>]</span> or Yarrp-like <span id="id3">[<a class="reference internal" href="bibliography.html#id5" title="Robert Beverly. Yarrp'ing the internet: randomized high-speed active topology discovery. In Proceedings of the 2016 Internet Measurement Conference, 413–420. 2016.">Bev16</a>]</span> probes.</p>
<p>For ICMP probes, the source port is encoded by caracal in the checksum field of the ICMP header
which is generally used by routers for per-flow load-balancing.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example: ICMP ping towards Google DNS servers with 2 flows per address and a TTL of 32.</span>
<span class="n">prefixes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;8.8.8.8/32&quot;</span><span class="p">,</span> <span class="s2">&quot;icmp&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2001:4860:4860::8888/128&quot;</span><span class="p">,</span> <span class="s2">&quot;icmp6&quot;</span><span class="p">)]</span>
<span class="n">prefix_len_v4</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">prefix_len_v6</span> <span class="o">=</span> <span class="mi">128</span>
<span class="n">flow_ids</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ttls</span> <span class="o">=</span> <span class="p">[</span><span class="mi">32</span><span class="p">]</span>

<span class="c1"># When given a prefix size of 1, the sequential flow mapper will only vary the port.</span>
<span class="n">mapper_v4</span> <span class="o">=</span> <span class="n">SequentialFlowMapper</span><span class="p">(</span><span class="n">prefix_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mapper_v6</span> <span class="o">=</span> <span class="n">SequentialFlowMapper</span><span class="p">(</span><span class="n">prefix_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Example: ICMP ping towards 1.0.0.0/24 with 1 flow per address and a TTL of 32.</span>
<span class="n">prefixes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;1.0.0.0/24&quot;</span><span class="p">,</span> <span class="s2">&quot;icmp&quot;</span><span class="p">)]</span>
<span class="n">prefix_len_v4</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># The generator will cut the /24 in 256 /32.</span>
<span class="n">flow_ids</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ttls</span> <span class="o">=</span> <span class="p">[</span><span class="mi">32</span><span class="p">]</span>
<span class="c1"># Same flow mappers as above.</span>

<span class="c1"># Example: UDP traceroute towards 1.0.0.0/24 with 2 flows per address.</span>
<span class="c1"># 256 addresses * 2 flows * 30 TTLs = 15,360 probes.</span>
<span class="n">prefixes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;1.0.0.0/24&quot;</span><span class="p">,</span> <span class="s2">&quot;udp&quot;</span><span class="p">)]</span>
<span class="n">prefix_len_v4</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># The generator will cut the /24 in 256 /32.</span>
<span class="n">flow_ids</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ttls</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
<span class="c1"># Same flow mappers as above.</span>

<span class="c1"># Example: UDP traceroute towards 1.0.0.0/24 with 6 flows **per prefix**.</span>
<span class="c1"># 1 prefix * 6 flows * 30 TTLs = 180 probes.</span>
<span class="n">prefixes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;1.0.0.0/24&quot;</span><span class="p">,</span> <span class="s2">&quot;udp&quot;</span><span class="p">)]</span>
<span class="n">prefix_len_v4</span> <span class="o">=</span> <span class="mi">24</span> <span class="c1"># We want to target the prefix, not its individual addresses.</span>
<span class="n">flow_ids</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">ttls</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>

<span class="c1"># The random flow mapper will assign a random destination (in the /24) to each flow.</span>
<span class="n">mapper_v4</span> <span class="o">=</span> <span class="n">RandomFlowMapper</span><span class="p">(</span><span class="n">prefix_size</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diamond_miner.generators.probe_generator_by_flow">
<span class="sig-prename descclassname"><span class="pre">diamond_miner.generators.</span></span><span class="sig-name descname"><span class="pre">probe_generator_by_flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">prefixes:</span> <span class="pre">~collections.abc.Iterable[tuple[str,</span> <span class="pre">str,</span> <span class="pre">collections.abc.Iterable[int]]],</span> <span class="pre">flow_ids:</span> <span class="pre">~collections.abc.Sequence[int],</span> <span class="pre">*,</span> <span class="pre">prefix_len_v4:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">24,</span> <span class="pre">prefix_len_v6:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">64,</span> <span class="pre">probe_src_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">24000,</span> <span class="pre">probe_dst_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">33434,</span> <span class="pre">mapper_v4:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;,</span> <span class="pre">mapper_v6:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;,</span> <span class="pre">seed:</span> <span class="pre">~typing.Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/diamond_miner/generators/standalone.html#probe_generator_by_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diamond_miner.generators.probe_generator_by_flow" title="Permalink to this definition"></a></dt>
<dd><p>Generate a probe for each prefix, flow id and TTL, in a random order.
This function differs from <a class="reference internal" href="#diamond_miner.generators.probe_generator" title="diamond_miner.generators.probe_generator"><code class="xref py py-func docutils literal notranslate"><span class="pre">probe_generator()</span></code></a> in two aspects:</p>
<blockquote>
<div><ul class="simple">
<li><p>The TTLs are specified for each prefixes, and not globally.</p></li>
<li><p>All the probes for a given prefix and flow id are generated sequentially.</p></li>
</ul>
</div></blockquote>
<p>The parameters and output are identical to <a class="reference internal" href="#diamond_miner.generators.probe_generator" title="diamond_miner.generators.probe_generator"><code class="xref py py-func docutils literal notranslate"><span class="pre">probe_generator()</span></code></a>,
excepted for <code class="docutils literal notranslate"><span class="pre">prefixes</span></code> which is a list of (prefix, protocol, TTLs) tuples,
and the absence of the <code class="docutils literal notranslate"><span class="pre">ttls</span></code> parameter.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diamond_miner.generators.probe_generator_from_database">
<span class="sig-prename descclassname"><span class="pre">diamond_miner.generators.</span></span><span class="sig-name descname"><span class="pre">probe_generator_from_database</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client:</span> <span class="pre">~pych_client.client.ClickHouseClient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_id:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">round_:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapper_v4:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapper_v6:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_src_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">24000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_dst_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">33434</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_ttl_geq:</span> <span class="pre">~typing.Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_ttl_leq:</span> <span class="pre">~typing.Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsets:</span> <span class="pre">~collections.abc.Iterable[ipaddress.IPv4Network</span> <span class="pre">|</span> <span class="pre">ipaddress.IPv6Network]</span> <span class="pre">=</span> <span class="pre">(IPv6Network('::/0')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/diamond_miner/generators/database.html#probe_generator_from_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diamond_miner.generators.probe_generator_from_database" title="Permalink to this definition"></a></dt>
<dd><p>TODO: Doctest, note that this doesn’t randomize probes.
&gt;&gt;&gt; from ipaddress import ip_address
&gt;&gt;&gt; from diamond_miner.insert import insert_probe_counts
&gt;&gt;&gt; from diamond_miner.test import client, create_tables
&gt;&gt;&gt; create_tables(client, “test_probe_gen”)
&gt;&gt;&gt; insert_probe_counts(client, “test_probe_gen”, 1, [(“8.8.0.0/23”, “icmp”, [1, 2], 2)])
&gt;&gt;&gt; probes = list(probe_generator_from_database(client, “test_probe_gen”, 1))
&gt;&gt;&gt; len(probes)
8
&gt;&gt;&gt; (str(ip_address(probes[0][0])), <a href="#id4"><span class="problematic" id="id5">*</span></a>probes[0][1:])
(‘::ffff:808:100’, 24000, 33434, 1, ‘icmp’)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diamond_miner.generators.probe_generator_parallel">
<span class="sig-prename descclassname"><span class="pre">diamond_miner.generators.</span></span><span class="sig-name descname"><span class="pre">probe_generator_parallel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath:</span> <span class="pre">~pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client:</span> <span class="pre">~pych_client.client.ClickHouseClient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_id:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">round_:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapper_v4:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapper_v6:</span> <span class="pre">~diamond_miner.typing.FlowMapper</span> <span class="pre">=</span> <span class="pre">&lt;diamond_miner.mappers.SequentialFlowMapper</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_src_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">24000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_dst_port:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">33434</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_ttl_geq:</span> <span class="pre">~typing.Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_ttl_leq:</span> <span class="pre">~typing.Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_open_files:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">8192</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_workers:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="reference internal" href="_modules/diamond_miner/generators/parallel.html#probe_generator_parallel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diamond_miner.generators.probe_generator_parallel" title="Permalink to this definition"></a></dt>
<dd><p>Compute the probes to send given the previously discovered links.
This function shuffle the probes on-disk using the following algorithm:
<a class="reference external" href="https://lemire.me/blog/2010/03/15/external-memory-shuffling-in-linear-time/">https://lemire.me/blog/2010/03/15/external-memory-shuffling-in-linear-time/</a></p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mappers.html" class="btn btn-neutral float-left" title="Flow Mappers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rounds.html" class="btn btn-neutral float-right" title="MDA" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Sorbonne Université.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>